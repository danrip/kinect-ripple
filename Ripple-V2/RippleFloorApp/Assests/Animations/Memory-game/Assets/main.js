function initializeTimer(){var a=new Object;return a.actualObject=null,a.value=1,a.running=!1,a.startTimer=function(){a.running=!0,a.value=1,a.actualObject=setInterval(function(){a.value+=1},1e3)},a.stopTimer=function(){clearInterval(a.actualObject),a.actualObject=null,a.running=!1},a.getTime=function(){return a.value},a}function findMouseOnWhichTile(a,b){return window.innerHeight,window.innerWidth,rowNumber=b/(window.innerHeight/numberOfRows)+1,columnNumber=a/(window.innerWidth/numberOfColumns)+1,Math.floor(rowNumber)+","+Math.floor(columnNumber)}function createGameTile(a,b,c){var d=document.createElement("div");d.className="gameTile",d.style.msGridRow=b,d.style.msGridColumn=c,d.style.textAlign="center",d.style.fontSize="5.0em",d.style.perspective=1e3,d.style.msPerspective=1e3,d.style.width="100%",d.style.height="100%",d.style.border="1px solid red",d.style.position="relative",d.id=b+","+c,d.setAttribute("data-number",a);var e=document.createElement("div");e.style.background=colors[Math.floor(Math.random()*(colors.length-1))],e.style.height="inherit",e.style.width="inherit",e.style.backfaceVisibility="hidden",e.style.position="absolute",e.style.transition="2.0s",e.style.zIndex="200",e.style.border="1px solid red",e.id=b+","+c+"-front";var f=document.createElement("div");f.className="outer",f.style.display="table",f.style.zIndex="100",f.style.height="inherit",f.style.width="inherit",f.style.transition="3.0s",f.style.border="1px solid red",f.style.position="absolute",f.style.background="#fff",f.style.backfaceVisibility="hidden",f.style.transform="rotateY(-180deg)",f.id=b+","+c+"-back";var g=document.createElement("div");g.className="inner";var h=document.createElement("div");return h.className="content",g.style.display="table-cell",g.style.verticalAlign="middle",g.style.background="#fff",h.style.msTransform="rotate(90deg)",h.innerHTML=a,g.appendChild(h),f.appendChild(g),d.appendChild(e),d.appendChild(f),d}function populateArray(a,b){var c=new Array;for(i=1;a*b/2>=i;++i)c.push(i),c.push(i);return c}function shuffle(a){for(var c,d,b=a.length;b--;)d=0|Math.random()*b,c=a[b],a[b]=a[d],a[d]=c;return a}function sendMessageToFrontScreen(a,b){var c="";for(i=0;i<b.length;++i)c=c.concat(",",b[i]);switch(c=a.concat(c),a){case"tileOpened":window.external.executeCommand("sendCommandToFrontScreen",c);case"currentTile":window.external.executeCommand("sendCommandToFrontScreen",c)}}var numberOfRows=3,numberOfColumns=4,Numbers,mouseOnTile="0,0",colors=["#82bd2d","#39AB3E","#B0EBAD","C8D97E"],solvedTiles=new Array,timer=initializeTimer(),tilesOpened=0,gameSolved=!1;window.onload=function(){for(Numbers=populateArray(numberOfRows,numberOfColumns),Numbers=shuffle(Numbers),i=1;numberOfRows>=i;i++)for(j=1;numberOfColumns>=j;j++){var a=createGameTile(Numbers[(i-1)*numberOfColumns+j-1],i,j);document.getElementById("game-container").appendChild(a)}document.getElementById("game-container").onmousemove=function(a){if(!gameSolved){"0,0"!=mouseOnTile||timer.running||timer.startTimer();var b=findMouseOnWhichTile(a.clientX,a.clientY);if(b==mouseOnTile||timer.running||-1!=solvedTiles.indexOf(b)||timer.startTimer(),timer.getTime()>1&&b!=mouseOnTile&&-1==solvedTiles.indexOf(b)){timer.stopTimer();try{document.getElementById(mouseOnTile).getAttribute("data-number")!=document.getElementById(b).getAttribute("data-number")?-1==solvedTiles.indexOf(mouseOnTile)&&(document.getElementById(mouseOnTile+"-front").style.msTransform="rotateY(0deg)",document.getElementById(mouseOnTile+"-back").style.zIndex=100,document.getElementById(mouseOnTile+"-back").style.msTransform="rotateY(-180deg)"):-1==solvedTiles.indexOf(mouseOnTile)&&-1==solvedTiles.indexOf(b)&&(solvedTiles.push(mouseOnTile),solvedTiles.push(b),solvedTiles.length==numberOfRows*numberOfColumns&&setTimeout(function(){gameSolved=!0;var a=document.getElementById("game-container");a.innerHTML="",a.style.transform="rotate(90deg)",a.style.textAlign="center",a.style.fontFamily="Segoe UI",a.style.fontSize="5.0em",a.style.color="#0f0",a.style.display="block",a.style.height=window.innerHeight,a.style.width=window.innerWidth,a.innerHTML="WELL <br/> DONE!"},2500))}catch(c){}mouseOnTile=b,document.getElementById(mouseOnTile+"-front").style.msTransform="rotateY(180deg)",document.getElementById(mouseOnTile+"-back").style.zIndex=300,document.getElementById(mouseOnTile+"-back").style.msTransform="rotateY(0deg)",document.getElementById("flip-sound").play(),tilesOpened++;var d=new Array;d.push(tilesOpened),sendMessageToFrontScreen("tileOpened",d),d=new Array,d.push(document.getElementById(mouseOnTile).getAttribute("data-number")),sendMessageToFrontScreen("currentTile",d)}}}};